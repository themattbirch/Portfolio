---
import Layout from "../layouts/Layout.astro";
import ProjectCard from "@/components/ProjectCard.astro";

const projects = [
  {
    title: "Florida Grade & Pave",
    description:
      "A paving company that handles both residential and commercial needs.",
    imageSrc: "/images/florida-grade-and-pave.png",
    category: "Asphalt Paving",
    keyFeatures: ["Landing Page", "Services", "Book Directly"],
    link: "https://floridagradeandpave.com/",
  },
  {
    title: "Active Care Clinic",
    description: "A well-known chiropractic and acupuncture clinic.",
    imageSrc: "/images/active-care-clinic.png",
    category: "Chiropractor",
    keyFeatures: [
      "Live Support",
      "Mission Statement",
      "Google Maps Integration",
    ],
    link: "https://activecareclinic.com/",
  },
  {
    title: "The Packers Post",
    description: "A Green Bay Packers-focused sports blog.",
    imageSrc: "/images/the-packers-post.png",
    category: "Blog",
    keyFeatures: ["RSS Feed", "Blog Template", "Metadata"],
    link: "https://thepackerspost.com/",
  },
  {
    title: "Prestige Academia",
    description: "An online academy that teaches English in Latin America.",
    imageSrc: "images/prestige-academia.png",
    category: "Education",
    keyFeatures: ["Language Translator", "Registration Form", "Brochure"],
    link: "https://prestigeacademia.com/",
  },
  {
    title: "William Kerrigan Painting",
    description: "A locally-owned painting company.",
    imageSrc: "images/william-kerrigan-painting.png",
    category: "House Painting",
    keyFeatures: ["Testimonials", "Services", "Bio"],
    link: "https://williamkpainting.com/",
  },
  {
    title: "Lynch's Landing",
    description: "Popular hospitality business located in Florida.",
    imageSrc: "/images/lynchs-landing-rv-park.png",
    category: "RV Park",
    keyFeatures: ["Brochure", "Contact Form", "Live Cam"],
    link: "https://lynchslandingrvpark.com/",
  },
];

const pageTitle = "My Projects";
const pageDescription = "All about my portfolio of work.";
---

<Layout title={pageTitle} description={pageDescription}>
  <div class="horizontal-gradient-wrapper-1">
    <section
      class="text-center mx-auto py-16 sm:py-24 md:py-32 px-8 sm:px-10 md:px-12"
    >
      <div class="max-w-screen-md mx-auto px-4 sm:px-6 lg:px-8">
        <h1 class="h1-text heading-text text-center mb-8 md:mb-12 fade-in">
          {pageTitle}
        </h1>
        <p class="text-lg text-gray-600 dark:text-gray-300">
          Understanding and refining these soft skills is crucial for
          professional growth, fostering strong team dynamics, and ensuring
          project success.
        </p>
      </div>
    </section>
  </div>

  <div class="horizontal-gradient-wrapper-2">
    <section class="projects-section">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 fade-in">
        <div class="text-center mb-16 sm:mb-24 md:mb-32">
          <h2 class="h2-text heading-text inline-block">
            Here are just a few projects I've built.
          </h2>
          <div class="w-24 h-1 bg-gray-300 dark:bg-gray-700 mx-auto mt-4"></div>
        </div>
        <div class="space-y-16 md:space-y-24">
          {
            projects.map((project) => (
              <ProjectCard
                title={project.title}
                description={project.description}
                imageSrc={project.imageSrc}
                category={project.category}
                keyFeatures={project.keyFeatures}
                link={project.link}
              />
            ))
          }
        </div>
      </div>
    </section>
  </div>

  <div class="horizontal-gradient-wrapper-3">
    <section class="call-to-action py-16 sm:py-24 md:py-32">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2
          class="h2-text heading-text text-3xl sm:text-4xl md:text-5xl font-bold leading-tight mb-6"
        >
          Ready for me to bring your next project to life?
        </h2>
        <p
          class="text-lg text-gray-600 dark:text-gray-300 mb-8 max-w-2xl mx-auto"
        >
          I'm here, eager to help you turn your vision into reality. Let's
          create something amazing together!
        </p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
          <a
            href="/contact"
            class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-700 hover:bg-gradient-to-r from-blue-800 to-blue-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-300"
          >
            Get In Touch
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 ml-2"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
            </svg>
          </a>
          <a
            href="#projects"
            class="inline-flex items-center justify-center px-6 py-3 border border-gray-300 dark:border-gray-700 text-base font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-300"
          >
            Learn More About My Skills
          </a>
        </div>
      </div>
    </section>
  </div>
</Layout>

<style>
  .call-to-action {
    position: relative;
    overflow: hidden;
  }
  .call-to-action::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    opacity: 0.05;
    z-index: 0;
  }
  .call-to-action > div {
    position: relative;
    z-index: 1;
  }

  .projects-container {
    margin-top: 2rem;
  }

  .horizontal-gradient-wrapper-1 {
    background: linear-gradient(to top, #ffffff, #b5c3d9);
  }

  .horizontal-gradient-wrapper-2 {
    background: linear-gradient(to bottom, #ffffff, #d0d9e7, #ffffff);
    min-height: 100vh;
  }

  .horizontal-gradient-wrapper-3 {
    background: linear-gradient(to bottom, #ffffff, #b5c3d9);
  }

  /* Dark mode gradient */

  :global(.dark) .horizontal-gradient-wrapper-1 {
    background: linear-gradient(to top, #1f2937, #3b536a);
  }

  :global(.dark) .horizontal-gradient-wrapper-2 {
    background: linear-gradient(to bottom, #1f2937, #4d6c8a, #1f2937);
  }

  /* Dark mode gradient */
  :global(.dark) .horizontal-gradient-wrapper-3 {
    background: linear-gradient(to bottom, #1f2937, #3b536a);
  }
</style>

<script>
  function handleFadeIn() {
    const fadeIns = document.querySelectorAll(".fade-in");

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
            observer.unobserve(entry.target); // Stop observing once visible
          }
        });
      },
      {
        threshold: 0.2,
        rootMargin: "0px 0px -100px 0px", // Start fading in slightly before the element is in view
      }
    );

    fadeIns.forEach((fadeIn) => {
      // Check if the element is already visible (e.g., on page load)
      const rect = fadeIn.getBoundingClientRect();
      if (rect.top < window.innerHeight) {
        fadeIn.classList.add("visible");
      } else {
        observer.observe(fadeIn);
      }
    });
  }

  // Run on initial load
  document.addEventListener("DOMContentLoaded", handleFadeIn);

  // Run on each page navigation (for SPA-like behavior)
  document.addEventListener("astro:page-load", handleFadeIn);

  // Fallback for browsers that don't support IntersectionObserver
  if (!("IntersectionObserver" in window)) {
    document
      .querySelectorAll(".fade-in")
      .forEach((el) => el.classList.add("visible"));
  }
</script>
