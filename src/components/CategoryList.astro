---
import type { CollectionEntry } from "astro:content";

type Props = {
  categories: string[];
  title?: string;
  className?: string;
};

const { categories, title } = Astro.props;

const getCategoryUrl = (category: string) =>
  `/category/${category.toLowerCase().replace(/\s+/g, "-")}`;
---

<div class="category-section">
  {
    title && (
      <h2 class="text-xl sm:text-2xl font-bold mb-2 sm:mb-4 text-center">
        {title}
      </h2>
    )
  }
  <div class="category-grid">
    {
      categories.map((category) => (
        <a
          href={getCategoryUrl(category)}
          class="category-button text-center text-blue-700 dark:text-white rounded-full px-4 py-2 text-sm sm:text-base md:text-lg font-semibold border border-blue-700 dark:border-white hover:bg-sky-100 dark:hover:bg-teal-900 transition-colors duration-300"
        >
          {category}
        </a>
      ))
    }
  </div>
</div>
<style>
  .category-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    justify-content: flex-end;
    width: 100%;
  }

  .category-button {
    white-space: nowrap;
    padding: 0.75rem 1.5rem;
    min-width: 180px;
    text-align: center;
    font-size: 1rem;
  }

  /* Full stacking and centering for very small screens */
  @media (max-width: 640px) {
    .category-grid {
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
    }

    .category-button {
      width: 100%;
      max-width: 280px;
    }
  }

  /* Force full stacking and centering for screens between 860px and 765px */
  @media (max-width: 860px) and (min-width: 765px) {
    .category-grid {
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
    }

    .category-button {
      width: 100%;
      max-width: 280px;
    }
  }
</style>
