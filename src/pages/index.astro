---
// src/pages/index.astro
import Layout from "../layouts/Layout.astro";
import "../styles/indexstyles.css";
import Hero from "../components/Hero.astro";
import { Image } from "astro:assets";
import meHeroImg from "/assets/images/me-black-shirt-jeans.webp";
import Testimonials from "../components/Testimonials.astro";
import SkillsSection from "../components/SkillsSection.jsx";
import CTASection from "../components/CTASection.astro";
import ServiceCard from "../components/ServiceCard.astro";
import QualityItem from "../components/QualityItem.astro";
import Section from "../components/Section.astro";

const services = [
  {
    title: "Web Platform Ownership & Execution",
    description:
      "Own and maintain content-driven web platforms end to end—from CMS structure and frontend implementation to reliability, performance, and long-term maintainability.",
  },
  {
    title: "Responsive Web & Progressive Experiences",
    description:
      "Deliver responsive, accessible web experiences across devices, including Progressive Web App patterns where appropriate, with a focus on usability, performance, and consistency.",
  },
  {
    title: "Analytics, Automation & AI-Assisted Workflows",
    description:
      "Apply analytics, automation, and AI-assisted tools to improve content workflows, surface insights, and support smarter iteration—without adding unnecessary complexity to the user experience.",
  },
  {
    title: "Content Strategy, UX & Information Architecture",
    description:
      "Translate business and editorial goals into clear site structure, intuitive navigation, and UX-focused content—bringing editorial judgment and strategic clarity to digital platforms.",
  },
];

const qualities = [
  "Content-First",
  "Analytics-Driven",
  "UX-Focused",
  "Reliable Execution",
];
const half = Math.ceil(qualities.length / 2);
const leftQualities = qualities.slice(0, half);
const rightQualities = qualities.slice(half);
const pageTitle =
  "Matt Birch: Digital Content Strategist | CMS, SEO, Analytics & UX";
const pageDescription =
  "Portfolio of Matt Birch, a Digital Content Strategist focused on content operations, CMS governance, UX and information architecture, technical SEO, and web analytics. I own and optimize content-led websites to improve usability, performance, and discoverability.";
---

<Layout
  title={pageTitle}
  description={pageDescription}
  ogImage="/assets/images/matt-birch-headshot.jpg"
  fullWidth={true}
>
  <!-- Hero Section -->
  <section>
    <Hero />
  </section>

  <!-- USP + Services Section -->
  <section
    class="bg-background-secondary dark:bg-background-dark transition-colors duration-300
            pt-8 sm:pt-12 md:pt-20 lg:pt-24 xl:pt-32
            pb-8 sm:pb-12 md:pb-20 lg:pb-24 xl:pb-32"
  >
    <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- stack on mobile, row on md+ -->
      <div class="flex flex-col md:flex-row items-start gap-8">
        <!-- ⬅️ copy + desktop-only button -->
        <div class="flex-1">
          <h2 class="h2-text mb-6">What I Do</h2>

          <p class="mb-6">
            I’m a Digital Content Strategist who helps organizations design and
            govern content-led websites—aligning CMS architecture, UX, SEO, and
            analytics to support usability and long-term scalability.
          </p>
          <p class="mb-6">
            My work extends beyond launches to include site health and ongoing
            ownership, ensuring platforms remain stable, maintainable, and
            effective as content, teams, and requirements evolve.
          </p>
          <p>
            I bring <span class="text-blue-700 dark:text-blue-300 italic">
              strong editorial judgment</span
            > to web platforms—translating business and content goals into structured
            pages, intuitive navigation, and UX-focused content. I use performance
            and analytics data to guide decisions and continuously refine how sites
            function over time.
          </p>

          <div
            class="hidden md:flex mt-8 justify-center md:justify-start lg:justify-end"
          >
            <button
              class="toggle-services-btn px-6 py-3 rounded-md font-semibold bg-primary text-white
                   hover:bg-primary-dark dark:bg-primary-dark dark:hover:bg-blue-600 transition"
            >
              See more services
            </button>
          </div>
        </div>

        <!-- ➡️ photo + mobile-only button -->
        <div
          class="flex items-center flex-row-reverse justify-center md:justify-end w-full md:w-1/3 lg:w-1/4
               mt-6 xl:-mt-20 space-x-4"
        >
          <div class="w-40 sm:w-48 md:w-56 lg:w-full">
            <Image
              src={meHeroImg}
              alt="Matt showcasing skills for clients"
              class="object-contain h-auto w-full max-w-xs mx-auto"
              width={400}
              height={600}
              loading="lazy"
            />
          </div>

          <!-- mobile-only button -->
          <button
            class="toggle-services-btn md:hidden px-6 py-3 rounded-md font-semibold bg-primary text-white
                 hover:bg-primary-dark dark:bg-primary-dark dark:hover:bg-blue-600 transition"
          >
            See more services
          </button>
        </div>
      </div>

      <!-- USP service list -->
      <div
        id="extra-services"
        class="hidden opacity-0 translate-y-2 transition-all duration-300
             gap-6 sm:gap-8
             overflow-x-auto snap-x snap-mandatory
             md:flex-nowrap"
      >
        {
          services.map((s) => (
            <div class="min-w-[80%] sm:min-w-[60%] md:min-w-[50%] lg:min-w-0 snap-center">
              <ServiceCard title={s.title} description={s.description} />
            </div>
          ))
        }
      </div>
    </div>

    <!-- toggle logic -->
    <script is:inline type="module">
      const buttons = document.querySelectorAll(".toggle-services-btn");
      const extra = document.getElementById("extra-services");

      const mobileClasses = ["flex", "md:flex-nowrap"];
      const desktopClasses = [
        "lg:grid",
        "lg:grid-cols-2",
        "lg:gap-8",
        "lg:overflow-visible",
        "lg:snap-none",
      ];

      const addSwipeHint = () => {
        const first = extra.querySelector("div");
        if (first) {
          first.classList.add("animate-wiggle-x");
          extra.addEventListener(
            "scroll",
            () => first.classList.remove("animate-wiggle-x"),
            { once: true },
          );
        }
      };

      if (buttons.length && extra) {
        const setLabel = (txt) => buttons.forEach((b) => (b.textContent = txt));

        buttons.forEach((btn) =>
          btn.addEventListener("click", () => {
            const opening = extra.classList.contains("hidden");

            if (opening) {
              // --------- SHOW ---------
              extra.classList.remove("hidden", "opacity-0");
              extra.classList.add("mt-8", ...mobileClasses, ...desktopClasses);
              setLabel("Hide services");
              if (window.innerWidth < 1024) addSwipeHint();
            } else {
              // ---------- HIDE ----------
              extra.classList.add("hidden", "opacity-0");
              extra.classList.remove(
                "mt-8",
                ...mobileClasses,
                ...desktopClasses,
              );
              setLabel("See more services");
            }
          }),
        );
      }
    </script>
  </section>

  <!-- Testimonials Section -->
  <Section>
    <div class="testimonial-wrapper">
      <h2
        class="h2-text font-bold text-center mx-auto mb-8 sm:mb-12 md:mb-20 lg:mb-24 xl:mb-32"
      >
        Ask My Clients About Projects I've Completed
      </h2>
      <Testimonials />
    </div>
  </Section>

  <!-- Unique Sales Proposition -->
  <section class="py-16 lg:py-24">
    <div class="max-w-screen-lg mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="h2-text mb-8">
        They’ll Tell You I Think Beyond Implementation
      </h2>

      <div
        class="prose prose-lg dark:prose-invert max-w-none space-y-6 text-left"
      >
        <p>
          Effective websites require more than clean execution. They require
          clarity, structure, and an understanding of how people actually use
          information. That perspective shapes how I collaborate with
          teams—focusing not just on what gets built, but how it’s organized,
          maintained, and sustained over time.
        </p>
        <p>
          Clients and collaborators often highlight my ability to bring order to
          complexity, ask the right questions early, and help teams make better
          decisions about their platforms—resulting in sites that are easier to
          manage and more effective for the people who rely on them.
        </p>
      </div>
    </div>
  </section>

  <!-- Skills Section -->
  <Section class="bg-background-skills dark:bg-background-dark">
    <SkillsSection client:visible />
  </Section>

  <!-- CTA Section -->
  <Section>
    <h2 class="h2-text mb-10 text-center">What You Can Expect</h2>
    <div class="flex justify-center">
      <div
        class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-12 justify-items-center"
      >
        <ul class="space-y-6">
          {leftQualities.map((quality) => <QualityItem text={quality} />)}
        </ul>
        <ul class="space-y-6">
          {rightQualities.map((quality) => <QualityItem text={quality} />)}
        </ul>
      </div>
    </div>
    <div class="flex justify-center my-12">
      <div class="w-12 border-t-2 border-gray-300 dark:border-gray-600"></div>
    </div>
    <CTASection />
  </Section>
</Layout>
