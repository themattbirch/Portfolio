---
import { Image } from "astro:assets";

interface Testimonial {
  name: string;
  business: string;
  quote: string;
  photo: ImageMetadata;
}

interface Props {
  testimonials?: Testimonial[];
}

import choHeadshot from "../assets/images/cho-headshot.png";
import cgHeadshot from "../assets/images/cg-headshot.jpg";
import bcHeadshot from "../assets/images/bc-headshot.jpg";
import agHeadshot from "../assets/images/ag-headshot.jpg";

const testimonials: Testimonial[] = [
  {
    name: "Dr. Jay Cho",
    business: "Active Care",
    quote:
      "Matt made a new website for my business. It was the best choice I've made so far, because it looks great. Very reasonable and very professional. And he made it all in time even with an urgent request.",
    photo: choHeadshot,
  },
  {
    name: "Chris Gordon",
    business: "CGN",
    quote:
      "Excellent work! I have a terrific new website that is everything I wanted. I was guided through the whole process in a collaborative process. Matt Birch was patient and professional. My highest recommendation!",
    photo: cgHeadshot,
  },
  {
    name: "Bridget Costello",
    business: "Lynch's Landing",
    quote:
      "I can't say enough about how swift and professional our experience with this company has been. Matt created a beautiful new website for our business. We are very happy with his work.",
    photo: bcHeadshot,
  },
  {
    name: "Ann Gorman",
    business: "Blacktop Ohio",
    quote:
      "Matt was great to work with, I love the website he built for me, I have already recommended him to a few of my family members who are also business owners.",
    photo: agHeadshot,
  },
];
---

<div
  class="swiper-container relative testimonial-container rounded-full transition-all duration-300 bg-gradient-to-r from-blue-50 to-blue-100
 dark:bg-gradient-to-r dark:from-gray-700 dark:to-gray-800"
>
  <div class="swiper-wrapper">
    {
      testimonials.map((testimonial) => (
        <div class="swiper-slide">
          <div class="testimonial-card rounded-full p-6 shadow-lg relative overflow-hidden max-w-xs md:max-w-md lg:max-w-lg">
            <div class="testimonial-photo-wrapper">
              <Image
                src={testimonial.photo}
                alt={`Headshot of ${testimonial.name}`}
                class="testimonial-photo w-24 h-24 rounded-full object-cover mx-auto shadow-lg mb-4"
                width={96}
                height={96}
              />
            </div>
            <div class="text-center">
              <p class="text-2xl font-semibold">{testimonial.name}</p>
              <p class="text-sm">{testimonial.business}</p>
              <p class="italic mt-4">"{testimonial.quote}"</p>
            </div>
          </div>
        </div>
      ))
    }
  </div>

  <div class="swiper-button-prev"></div>
  <div class="swiper-button-next"></div>
  <div class="swiper-pagination"></div>
</div>

<script>
  import Swiper from "swiper";
  import { Navigation, Pagination, Autoplay } from "swiper/modules";
  import "swiper/css";
  import "swiper/css/navigation";
  import "swiper/css/pagination";

  function initSwiper() {
    if (document.querySelector(".swiper-initialized")) return;

    new Swiper(".swiper-container", {
      modules: [Navigation, Pagination, Autoplay],
      loop: true,
      slidesPerView: 1,
      spaceBetween: 30,
      autoplay: {
        delay: 5000,
        disableOnInteraction: false,
      },
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
      },
      allowSlideNext: true,
      allowSlidePrev: true,
      noSwiping: true,
      noSwipingClass: "testimonial-card",
    });
  }

  document.addEventListener("DOMContentLoaded", initSwiper);
  document.addEventListener("astro:page-load", initSwiper);
</script>

<style>
  .swiper-container {
    width: 100%;
    height: auto;
    padding: 2rem;
    overflow: hidden;
  }

  /* Rest of the styles remain the same */

  .swiper-button-prev,
  .swiper-button-next {
    color: var(--swiper-navigation-color, var(--testimonial-text-light));
  }

  .swiper-button-prev {
    left: 2rem;
  }

  .swiper-button-next {
    right: 2rem;
  }

  .swiper-pagination-bullet {
    background: var(--swiper-pagination-color, var(--testimonial-text-light));
  }

  /* Testimonials Container */
  /* Update the .testimonial-container styles */
  .testimonial-container {
    @apply overflow-hidden rounded-full max-w-7xl mx-auto transition-all duration-300 relative;
    border: 0.5px solid rgba(0, 0, 0, 0.05);
    box-shadow:
      0 0 0 1px rgba(0, 0, 0, 0.02),
      0 4px 6px -1px rgba(0, 0, 0, 0.05),
      0 2px 4px -1px rgba(0, 0, 0, 0.03);
    transition:
      box-shadow 0.3s ease,
      border-color 0.3s ease;
  }

  /* Update the dark mode styles for .testimonial-container */
  .dark .testimonial-container {
    border: 0.5px solid rgba(255, 255, 255, 0.1);
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.05),
      0 4px 6px -1px rgba(0, 0, 0, 0.2),
      0 2px 4px -1px rgba(0, 0, 0, 0.1);
  }

  .testimonial-container:hover {
    box-shadow:
      0 0 0 1px rgba(0, 0, 0, 0.05),
      0 12px 20px -3px rgba(0, 0, 0, 0.15),
      0 6px 10px -2px rgba(0, 0, 0, 0.1);
  }

  /* Update the .testimonial-card styles */
  .testimonial-card {
    @apply relative mx-auto p-6 rounded-full shadow-lg overflow-hidden transition-all duration-300;
    color: var(--testimonial-text-light);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow:
      0 8px 16px rgba(0, 0, 0, 0.1),
      0 4px 8px rgba(66, 153, 225, 0.2);
    width: 90%;
    max-width: 500px;
    height: auto;
  }

  /* Update the dark mode styles for .testimonial-card */
  .dark .testimonial-card {
    @apply text-gray-200;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow:
      0 2px 4px rgba(0, 0, 0, 0.3),
      0 8px 16px rgba(0, 0, 0, 0.2);
  }

  .testimonial-card:hover {
    box-shadow:
      0 12px 24px rgba(0, 0, 0, 0.2),
      0 6px 12px rgba(66, 153, 225, 0.3);
  }

  .testimonial-card p {
    margin-bottom: 1rem;
    line-height: 1.5;
  }

  .testimonial-card p:last-of-type {
    margin-bottom: 2rem;
  }

  .dark .testimonial-container:hover {
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.1),
      0 12px 20px -3px rgba(0, 0, 0, 0.25),
      0 6px 10px -2px rgba(0, 0, 0, 0.15); /* More pronounced on hover */
  }

  .dark .testimonial-card:hover {
    box-shadow:
      0 8px 16px rgba(0, 0, 0, 0.3),
      0 12px 24px rgba(0, 0, 0, 0.25); /* More pronounced blue glow on hover */
  }
  /* Media queries for padding */

  @media (min-width: 640px) {
    /* sm: small devices like tablets */
    .testimonial-card {
      padding: 3rem;
      /* Increase padding on small devices */
      max-width: 80%;
      /* Adjust max-width for small devices */
    }
  }

  @media (min-width: 768px) {
    /* md: medium devices like small laptops */
    .testimonial-card {
      padding: 4rem;
      /* Further increase padding on medium devices */
      max-width: 70%;
      /* Adjust max-width for medium devices */
    }
  }

  @media (min-width: 1024px) {
    /* lg: large devices like desktops */
    .testimonial-card {
      padding: 2rem;
      /* Larger padding on large devices */
      max-width: 50%;
      /* Adjust max-width for large devices */
    }
  }
</style>
