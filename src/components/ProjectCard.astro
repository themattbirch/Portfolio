---
import { Image } from "astro:assets";
import type { Project } from "@/data/projects"; // Import our new Project type
import { Globe, Github } from 'lucide-react'; // Import icons for buttons

export type Props = Project;

const { title, image, tagline, type, technologies, liveUrl, githubUrl } = Astro.props;

const typeColors = {
  'Full-Stack App': 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300',
  'Mobile App': 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300',
  'Client Website': 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300',
};

---

<div class="rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transition-shadow duration-300 flex flex-col bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 h-full">
  <a href={liveUrl || githubUrl} target="_blank" rel="noopener noreferrer" class="block">
    <Image src={image} alt={title} class="w-full h-48 object-cover aspect-thumbnail" />
  </a>

  <div class="p-6 flex flex-col flex-grow">
    <div class="flex justify-between items-center mb-2">
      <span class:list={['text-xs font-semibold uppercase px-2 py-1 rounded-full', typeColors[type]]}>
        {type}
      </span>
    </div>

    <h3 class="text-xl font-bold text-gray-900 dark:text-white">{title}</h3>
    <p class="mt-1 text-sm text-gray-600 dark:text-gray-400 flex-grow">{tagline}</p>

    <div class="mt-4">
      <h4 class="text-xs uppercase font-semibold text-gray-500 dark:text-gray-400">Tech Stack</h4>
      <div class="flex flex-wrap gap-2 mt-2">
        {technologies.map(tech => (
          <span class="text-xs bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-2 py-1 rounded">
            {tech}
          </span>
        ))}
      </div>
    </div>
  </div>

  <div class="p-4 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-700 mt-auto">
    <div class="flex justify-start gap-4">
      {liveUrl && (
        <a href={liveUrl} target="_blank" rel="noopener noreferrer" class="btn-project-link">
          <Globe size={16} className="mr-2" />
          Visit Site
        </a>
      )}
      {githubUrl && (
        <a href={githubUrl} target="_blank" rel="noopener noreferrer" class="btn-project-link">
          <Github size={16} className="mr-2" />
          View Code
        </a>
      )}
    </div>
  </div>
</div>

<style>
  .btn-project-link {
    @apply inline-flex items-center text-sm font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors;
  }
  .btn-project-link:hover {
    @apply underline;
  }
</style>